include_directories(
  ${CMAKE_SOURCE_DIR}/src
  ${CMAKE_BINARY_DIR}/src
)

set(MONGOCXX_EXAMPLES
  aggregate.cpp
  bson.cpp
  create.cpp
  index.cpp
  query.cpp
  remove.cpp
  update.cpp
)

foreach(EXAMPLE_SRC ${MONGOCXX_EXAMPLES})
  get_filename_component(EXAMPLE_TARGET ${EXAMPLE_SRC} NAME_WE)
  add_executable(${EXAMPLE_TARGET} ${EXAMPLE_SRC})
  target_link_libraries(${EXAMPLE_TARGET} mongocxx ${mongocxx_libs})
endforeach(EXAMPLE_SRC)

add_custom_target(examples DEPENDS ${MONGOCXX_EXAMPLES})
